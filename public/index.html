<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;">

    <title>当红人焕新家-抽奖活动</title>
    <link rel="stylesheet" href="./css/animate.css">
    <link rel="stylesheet" href="./css/icomoon/style.css">

    <link rel="stylesheet" href="index.css" />
    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script>
        // 获取url参数
        var getUrlparam = (param) => {
            var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)');
            var r = window.location.search.substr(1).match(reg) || window.location.hash.substring((window.location.hash
                .search(/\?/)) + 1).match(reg);
            if (r != null) {
                return decodeURIComponent(r[2]);
            }
        };
        var userid = getUrlparam('openid');
        if (!userid) {
            window.location.href =
                'https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzUzMDc4ODk1MQ==#wechat_redirect';
        }
        localStorage.setItem("userid", userid);

        /**
         * YDUI 可伸缩布局方案
         * rem计算方式：设计图尺寸px / 100 = 实际rem  例: 100px = 1rem
         */
        !(function(window) {
            /* 设计图文档宽度 */
            var docWidth = 750;

            var doc = window.document,
                docEl = doc.documentElement,
                resizeEvt = "orientationchange" in window ? "orientationchange" : "resize";

            var recalc = (function refreshRem() {
                var clientWidth = docEl.getBoundingClientRect().width;

                /* 8.55：小于320px不再缩小，11.2：大于420px不再放大 */
                docEl.style.fontSize =
                    Math.max(Math.min(20 * (clientWidth / docWidth), 11.2), 8.55) * 5 + "px";

                return refreshRem;
            })();

            /* 添加倍屏标识，安卓倍屏为1 */
            docEl.setAttribute(
                "data-dpr",
                window.navigator.appVersion.match(/iphone/gi) ? window.devicePixelRatio : 1
            );

            if (/iP(hone|od|ad)/.test(window.navigator.userAgent)) {
                /* 添加IOS标识 */
                doc.documentElement.classList.add("ios");
                /* IOS8以上给html添加hairline样式，以便特殊处理 */
                if (
                    parseInt(
                        window.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],
                        10
                    ) >= 8
                )
                    doc.documentElement.classList.add("hairline");
            }

            if (!doc.addEventListener) return;
            window.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener("DOMContentLoaded", recalc, false);
        })(window);
    </script>
</head>

<body>

    <div id="root"></div>
    <script src="index.js"></script>

</body>

</html>